# このアプリケーションについて

このアプリケーションは写真管理サービスのREST APIを提供するアプリケーションです。

## プログラムの構成
### APIのスキーマ定義
APIのスキーマ定義は `./openapi/openapi.yaml`に記述されています。
REST APIを作成する際は`./openapi/openapi.yaml`の定義に沿って記述してください。

### データベースモデル
MySQLをデータベースとして使用しています。
テーブルのデータモデルは `./infrastructres/dbmodels/`以下に定義されています。sqlboilerの定義です。

### エンティティ
ビジネスロジックのモデルは `./entities/`以下に定義されています。

# テストコードの記述について

## 自動テストの実行

自動テストを実行する場合は次のコマンドを実行します。

```shell
make dc_test
```

## テストコードのフォーマット
テストコードのファイルは、本体ファイルに対して`_test.go`というファイル名で同一ディレクトリに保存します。
例えば、`photo.go`に対するテストコードは`photo_test.go`と保存します。

テストコードは、下記のようにテスト関数内に`t.Run()`でパターン毎に分けて書きます。

```go
func Test_func1(t *testing.T) {
    t.Run("テストパターン名", func (t *testing.T) {
		
    })	
}
```

## モックの生成

構造体の関数のテストコードを書く場合、依存するフィールド変数の関数を呼び出す場合はモックを使用します。
モックは `./testing/mocks/`以下に保存されています。適宜使ってください。
モックのインターフェイスが一致しない場合など、モックの再生成が必要な場合は次のコマンドを使用します。

```shell
make dc_genmock
```